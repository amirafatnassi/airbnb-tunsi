<div class="row">
  <form [formGroup]="logementFG" id="msform">
    <div class="col-md-12 col-md-offset-3">
      <!-- step 1 logement -->
      <div id="msform">
        <!-- progressbar -->
        <ul id="progressbar">
          <li [ngClass]="step >= 1 ? 'active' : 'inactive'">Logement</li>
          <li [ngClass]="step >= 2 ? 'active' : 'inactive'">Adresse</li>
          <li [ngClass]="step >= 3 ? 'active' : 'inactive'">Détails</li>
          <li [ngClass]="step >= 4 ? 'active' : 'inactive'">Installations</li>
          <li [ngClass]="step >= 5 ? 'active' : 'inactive'">Critères</li>
          <li [ngClass]="step >= 6 ? 'active' : 'inactive'">Options</li>
          <li [ngClass]="step == 7 ? 'active' : 'inactive'">Safety items</li>
          <li [ngClass]="step == 8 ? 'active' : 'inactive'">Prxi</li>
        </ul>

        <!-- fieldsets -->
        <fieldset *ngIf="step == 1">
          <h2 class="fs-title">Ajouter logement</h2>
          <label for="titre">Titre:</label>
          <input
            type="text"
            formControlName="titre"
            [ngClass]="{
              'is-invalid': logement_step && logementFG.controls['titre'].errors
            }"
            placeholder="titre"
          />
          <div
            class="text-danger"
            *ngIf="logement_step && logementFG.controls['titre'].errors"
          >
            Titre required
          </div>
          <label for="description">Description:</label>
          <textarea
            type="text"
            formControlName="description"
            name="description"
            placeholder="description"
            rows="5"
          ></textarea>
          <div
            class="text-danger"
            *ngIf="logement_step && logementFG.controls['description'].errors"
          >
            Description est obligatoire
          </div>
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 2 adresse -->
      <div formGroupName="adresse" id="msform">
        <fieldset *ngIf="step == 2">
          <h2 class="fs-title">Détail adressee</h2>
          <div class="row">
            <div class="col-6">
              <label for="ville">Ville</label>
              <input type="text" formControlName="ville" placeholder="ville" />
              <div
                class="text-danger"
                *ngIf="adresse_step && adresse.controls['ville'].errors"
              >
                Ville obligatoire
              </div>
            </div>
            <div class="col-6">
              <label for="pays">Pays:</label>
              <input type="text" formControlName="pays" placeholder="pays" />
              <div
                class="text-danger"
                *ngIf="adresse_step && adresse.controls['pays'].errors"
              >
                Pays obligatoire
              </div>
            </div>
          </div>
          <label for="rue">Rue:</label>
          <input formControlName="rue" placeholder="rue" />
          <div
            class="text-danger"
            *ngIf="adresse_step && adresse.controls['rue'].errors"
          >
            Rue est obligatoire
          </div>
          <div class="row">
            <div class="col-6">
              <label for="cp">Code postal:</label>
              <input type="number" formControlName="cp" placeholder="cp" />
              <div
                class="text-danger"
                *ngIf="adresse_step && adresse.controls['cp'].errors"
              >
                code postal obligatoire
              </div>
            </div>
            <div class="col-6">
              <label for="num">N°:</label>
              <input type="number" formControlName="num" placeholder="num" />
              <div
                class="text-danger"
                *ngIf="adresse_step && adresse.controls['num'].errors"
              >
                Num de propriété obligatoire
              </div>
            </div>
          </div>
          <input
            (click)="previous()"
            type="button"
            name="previous"
            class="previous action-button-previous"
            value="Précèdant"
          />
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 3 details -->
      <div id="msform">
        <fieldset *ngIf="step == 3">
          <h2 class="fs-title">Détails</h2>

          <div class="row">
            <div class="col-6">
              <label for="nb_invites">Nombre d'invités (max):</label>
              <input
                type="number"
                formControlName="nb_invites"
                placeholder="1"
              />
              <div
                class="text-danger"
                *ngIf="details_step && logementFG.controls['nb_invites'].errors"
              >
                Nombre d'invités est obligatoire
              </div>
            </div>
            <div class="col-6">
              <label for="nb_chambres">Nombre de chambres:</label>
              <input
                type="number"
                formControlName="nb_chambres"
                placeholder="1"
              />
              <div
                class="text-danger"
                *ngIf="
                  details_step && logementFG.controls['nb_chambres'].errors
                "
              >
                nombre de chambres est obligatoire
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-6">
              <label for="nb_lits">Nombre de lits:</label>
              <input type="number" formControlName="nb_lits" placeholder="1" />
              <div
                class="text-danger"
                *ngIf="details_step && logementFG.controls['nb_lits'].errors"
              >
                Nombre de lits obligatoire!
              </div>
            </div>
            <div class="col-6">
              <label for="nb_salledeBain">Nombre de salles de bain:</label>
              <input
                type="number"
                formControlName="nb_salledeBain"
                placeholder="1"
              />
              <div
                class="text-danger"
                *ngIf="
                  details_step && logementFG.controls['nb_salledeBain'].errors
                "
              >
                Nombre de salles de bain obligatoire !
              </div>
            </div>
          </div>

          <input
            (click)="previous()"
            type="button"
            name="Précédant"
            class="previous action-button-previous"
            value="Previous"
          />
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 4 installations -->
      <div id="msform">
        <fieldset *ngIf="step == 4">
          <p class="h4">Liste des installations</p>
          <hr class="my-5" style="background-color: hsl(0, 0%, 65%)" />
          <div class="row gx-lg-5">
            <div class="col-md-3 mb-4" *ngFor="let i of liste_installations">
              <label>
                <input
                  id="radioDefault1"
                  type="checkbox"
                  name="defaultGroup"
                  class="card-input-element"
                  [checked]="selectedInstallations.includes(i._id)"
                  (click)="checkInstallation($event, i._id)"
                />

                <div class="card card-input">
                  <div class="card-body">
                    <p class="text-uppercase fw-bold text-muted">{{ i.lib }}</p>
                    <span *ngIf="i.icon"
                      ><img [src]="i.icon" alt="user" width="45"
                    /></span>
                  </div>
                </div>
              </label>
            </div>
          </div>

          <input
            (click)="previous()"
            type="button"
            name="previous"
            class="previous action-button-previous"
            value="Précèdant"
          />
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 5 criteres -->
      <div id="msform">
        <fieldset *ngIf="step == 5">
          <p class="h4">Liste des critères</p>
          <hr class="my-5" style="background-color: hsl(0, 0%, 65%)" />
          <div class="row gx-lg-5">
            <div class="col-md-3 mb-4" *ngFor="let c of liste_criteres">
              <label>
                <input
                  id="radioDefault1"
                  type="checkbox"
                  name="defaultGroup"
                  class="card-input-element"
                  [checked]="selectedCriteres.includes(c._id)"
                  (click)="checkCritere($event, c._id)"
                />
                <div class="card card-input">
                  <div class="card-body">
                    <p class="text-uppercase fw-bold">{{ c.lib }}</p>
                  </div>
                </div>
              </label>
            </div>
          </div>

          <input
            (click)="previous()"
            type="button"
            name="previous"
            class="previous action-button-previous"
            value="Précèdant"
          />
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 6 options -->
      <div id="msform">
        <fieldset *ngIf="step == 6">
          <p class="h4">Liste des options</p>
          <hr class="my-5" style="background-color: hsl(0, 0%, 65%)" />
          <div class="row gx-lg-5">
            <div class="col-md-3 mb-4" *ngFor="let o of liste_options">
              <label>
                <input
                  id="radioDefault1"
                  type="checkbox"
                  name="defaultGroup"
                  class="card-input-element"
                  [checked]="selectedOptions.includes(o._id)"
                  (click)="checkOption($event, o._id)"
                />

                <div class="card card-input">
                  <div class="card-body">
                    <p class="text-uppercase fw-bold text-muted">{{ o.lib }}</p>
                    <span *ngIf="o.icon"
                      ><img [src]="o.icon" alt="user" width="45"
                    /></span>
                  </div>
                </div>
              </label>
            </div>
          </div>

          <input
            (click)="previous()"
            type="button"
            name="previous"
            class="previous action-button-previous"
            value="Précèdant"
          />
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 7 safety items -->
      <div id="msform">
        <fieldset *ngIf="step == 7">
          <p class="h4">Liste des items de sécurité</p>
          <hr class="my-5" style="background-color: hsl(0, 0%, 65%)" />
          <div class="row gx-lg-5">
            <div class="col-md-3 mb-4" *ngFor="let o of liste_safetyItems">
              <label>
                <input
                  id="radioDefault1"
                  type="checkbox"
                  name="defaultGroup"
                  class="card-input-element"
                  [checked]="selectedSafetyItems.includes(o._id)"
                  (click)="checkSafetyItem($event, o._id)"
                />

                <div class="card card-input">
                  <div class="card-body">
                    <p class="text-uppercase fw-bold text-muted">{{ o.lib }}</p>
                    <span *ngIf="o.icon"
                      ><img [src]="o.icon" alt="user" width="45"
                    /></span>
                  </div>
                </div>
              </label>
            </div>
          </div>

          <input
            (click)="previous()"
            type="button"
            name="previous"
            class="previous action-button-previous"
            value="Précèdant"
          />
          <input
            (click)="next()"
            type="next"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 8 prix -->
      <div id="msform">
        <fieldset *ngIf="step == 8">
          <h2 class="fs-title">Prix</h2>
          <div class="row">
            <label for="prix">Prix / nuit:</label>
            <input type="number" formControlName="prix" placeholder="50" />
            <div class="text-danger" *ngIf="logementFG.controls['prix'].errors">
              Prix est obligatoire
            </div>
          </div>
          <input
            (click)="previous()"
            type="button"
            name="Précédant"
            class="previous action-button-previous"
            value="Previous"
          />
          <input
            (click)="next()"
            type="button"
            name="next"
            class="next action-button"
            value="Suivant"
          />
        </fieldset>
      </div>

      <!-- step 9 photos -->
      <div id="msform">
        <fieldset *ngIf="step == 9">
          <p class="h4">Télécharger vos meilleures photos</p>
          <hr class="my-5" style="background-color: hsl(0, 0%, 65%)" />
          <div class="center">
            <ngx-file-drop
              dropZoneLabel="Drop files here"
              (onFileDrop)="dropped($event)"
              (onFileOver)="fileOver($event)"
              (onFileLeave)="fileLeave($event)"
            >
              <ng-template
                ngx-file-drop-content-tmp
                let-openFileSelector="openFileSelector"
              >
                Il suffit de glisser et déposer les plus belles photos de votre logement içi
                <button
                  type="button"
                  (click)="openFileSelector()"
                  class="btn rounded-pill btn-secondary"
                >
                  Parcourir fichiers
                </button>
              </ng-template>
            </ngx-file-drop>
            <div class="upload-table">
              <table class="table">
                <thead>
                  <tr>
                    <th>Fichiers</th>
                  </tr>
                </thead>
                <tbody class="upload-name-style">
                  <tr *ngFor="let item of files; let i = index">
                    <td>
                      <strong>{{ item.relativePath }}</strong>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <input
            (click)="previous()"
            type="button"
            name="previous"
            class="previous action-button-previous"
            value="Précèdant"
          />
          <input
            (click)="submit()"
            type="submit"
            name="submit"
            class="submit action-button"
            value="Submit"
          />
        </fieldset>
      </div>
    </div>
  </form>
</div>
